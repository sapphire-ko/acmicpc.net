function v(s){var t=[],p=0,b=0;s.split('').forEach(function(e){switch(e){case'(':t.push(2);++p;break;case')':if(t.pop()!=2){return false;}--p;break;case'[':t.push(1);++b;break;case']':if(t.pop()!=1){return false;}--b;break;}});return(p==0&&b==0)}function a(t,c){return t.input.substr(0,t.index)+'+'+(c*eval(t[1]))+t.input.substr(t.index+t[0].length,t.input.length)}var s=require('fs').readFileSync('/dev/stdin').toString().trim();if(v(s)){s=s.replace(/\(\)/g,'+2').replace(/\[\]/g,'+3');while(s.match(/^[\+,\*,\d]+$/) === null){var t=s.match(/\(([\+,\*,\d]+)\)/);if(t!=null){s=a(t,2)}t=s.match(/\[([\+,\*,\d]+)\]/);if(t!=null){s=a(t,3)}}console.log(eval(s))}else{console.log(0)}
